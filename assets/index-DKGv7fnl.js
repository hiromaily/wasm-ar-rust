var Ao=Object.defineProperty;var To=(m,w,C)=>w in m?Ao(m,w,{enumerable:!0,configurable:!0,writable:!0,value:C}):m[w]=C;var Eo=(m,w)=>()=>(w||m((w={exports:{}}).exports,w),w.exports);var le=(m,w,C)=>To(m,typeof w!="symbol"?w+"":w,C);var Oo=Eo((Go,me)=>{(async()=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))t(_);new MutationObserver(_=>{for(const o of _)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(_){const o={};return _.integrity&&(o.integrity=_.integrity),_.referrerPolicy&&(o.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?o.credentials="include":_.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(_){if(_.ep)return;_.ep=!0;const o=n(_);fetch(_.href,o)}})();function m(){}function w(e){return e()}function C(){return Object.create(null)}function R(e){e.forEach(w)}function we(e){return typeof e=="function"}function H(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}let Q;function Ce(e,n){return e===n?!0:(Q||(Q=document.createElement("a")),Q.href=n,e===Q.href)}function Ae(e){return Object.keys(e).length===0}function pe(e,n){e.appendChild(n)}function $(e,n,t){e.insertBefore(n,t||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function M(e){return document.createElement(e)}function Y(e){return document.createTextNode(e)}function he(){return Y(" ")}function Te(){return Y("")}function k(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function Ee(e){return Array.from(e.childNodes)}function Oe(e,n){n=""+n,e.data!==n&&(e.data=n)}function E(e,n,t,_){t==null?e.style.removeProperty(n):e.style.setProperty(n,t,"")}let U;function j(e){U=e}function We(){if(!U)throw new Error("Function called outside component initialization");return U}function Ge(e){We().$$.on_mount.push(e)}const O=[],ae=[];let W=[];const ye=[],De=Promise.resolve();let ue=!1;function ze(){ue||(ue=!0,De.then(xe))}function ie(e){W.push(e)}const fe=new Set;let G=0;function xe(){if(G!==0)return;const e=U;do{try{for(;G<O.length;){const n=O[G];G++,j(n),Le(n.$$)}}catch(n){throw O.length=0,G=0,n}for(j(null),O.length=0,G=0;ae.length;)ae.pop()();for(let n=0;n<W.length;n+=1){const t=W[n];fe.has(t)||(fe.add(t),t())}W.length=0}while(O.length);for(;ye.length;)ye.pop()();ue=!1,fe.clear(),j(e)}function Le(e){if(e.fragment!==null){e.update(),R(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(ie)}}function Fe(e){const n=[],t=[];W.forEach(_=>e.indexOf(_)===-1?n.push(_):t.push(_)),t.forEach(_=>_()),W=n}const K=new Set;let A;function Re(){A={r:0,c:[],p:A}}function Me(){A.r||R(A.c),A=A.p}function I(e,n){e&&e.i&&(K.delete(e),e.i(n))}function D(e,n,t,_){if(e&&e.o){if(K.has(e))return;K.add(e),A.c.push(()=>{K.delete(e),_&&(t&&e.d(1),_())}),e.o(n)}else _&&_()}function se(e){e&&e.c()}function X(e,n,t){const{fragment:_,after_update:o}=e.$$;_&&_.m(n,t),ie(()=>{const a=e.$$.on_mount.map(w).filter(we);e.$$.on_destroy?e.$$.on_destroy.push(...a):R(a),e.$$.on_mount=[]}),o.forEach(ie)}function Z(e,n){const t=e.$$;t.fragment!==null&&(Fe(t.after_update),R(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Ue(e,n){e.$$.dirty[0]===-1&&(O.push(e),ze(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function J(e,n,t,_,o,a,u=null,s=[-1]){const d=U;j(e);const i=e.$$={fragment:null,ctx:[],props:a,update:m,not_equal:o,bound:C(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:C(),dirty:s,skip_bound:!1,root:n.target||d.$$.root};u&&u(i.root);let g=!1;if(i.ctx=t?t(e,n.props||{},(b,_e,...oe)=>{const ce=oe.length?oe[0]:_e;return i.ctx&&o(i.ctx[b],i.ctx[b]=ce)&&(!i.skip_bound&&i.bound[b]&&i.bound[b](ce),g&&Ue(e,b)),_e}):[],i.update(),g=!0,R(i.before_update),i.fragment=_?_(i.ctx):!1,n.target){if(n.hydrate){const b=Ee(n.target);i.fragment&&i.fragment.l(b),b.forEach(S)}else i.fragment&&i.fragment.c();n.intro&&I(e.$$.fragment),X(e,n.target,n.anchor),xe()}j(d)}class ee{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){Z(this,1),this.$destroy=m}$on(n,t){if(!we(t))return m;const _=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return _.push(t),()=>{const o=_.indexOf(t);o!==-1&&_.splice(o,1)}}$set(n){this.$$set&&!Ae(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const je="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(je);const Ve="/wasm-ar-rust/assets/image_detect_mozaic_wasm_bg-lOI9oLY-.wasm",qe=async(e={},n)=>{let t;if(n.startsWith("data:")){const _=n.replace(/^data:.*?base64,/,"");let o;if(typeof Buffer=="function"&&typeof Buffer.from=="function")o=Buffer.from(_,"base64");else if(typeof atob=="function"){const a=atob(_);o=new Uint8Array(a.length);for(let u=0;u<a.length;u++)o[u]=a.charCodeAt(u)}else throw new Error("Cannot decode base64-encoded data URL");t=await WebAssembly.instantiate(o,e)}else{const _=await fetch(n),o=_.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&o.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(_,e);else{const a=await _.arrayBuffer();t=await WebAssembly.instantiate(a,e)}}return t.instance.exports};let f;function Ne(e){f=e}const v=new Array(128).fill(void 0);v.push(void 0,null,!0,!1);function r(e){return v[e]}let V=v.length;function He(e){e<132||(v[e]=V,V=e)}function z(e){const n=r(e);return He(e),n}const Qe=typeof TextDecoder>"u"?(0,me.require)("util").TextDecoder:TextDecoder;let Be=new Qe("utf-8",{ignoreBOM:!0,fatal:!0});Be.decode();let ne=null;function q(){return(ne===null||ne.byteLength===0)&&(ne=new Uint8Array(f.memory.buffer)),ne}function P(e,n){return e=e>>>0,Be.decode(q().subarray(e,e+n))}function c(e){V===v.length&&v.push(v.length+1);const n=V;return V=v[n],v[n]=e,n}let x=0;const Ye=typeof TextEncoder>"u"?(0,me.require)("util").TextEncoder:TextEncoder;let te=new Ye("utf-8");const Ke=typeof te.encodeInto=="function"?function(e,n){return te.encodeInto(e,n)}:function(e,n){const t=te.encode(e);return n.set(t),{read:e.length,written:t.length}};function T(e,n,t){if(t===void 0){const s=te.encode(e),d=n(s.length,1)>>>0;return q().subarray(d,d+s.length).set(s),x=s.length,d}let _=e.length,o=n(_,1)>>>0;const a=q();let u=0;for(;u<_;u++){const s=e.charCodeAt(u);if(s>127)break;a[o+u]=s}if(u!==_){u!==0&&(e=e.slice(u)),o=t(o,_,_=u+e.length*3,1)>>>0;const s=q().subarray(o+u,o+_),d=Ke(e,s);u+=d.written,o=t(o,_,u,1)>>>0}return x=u,o}function N(e){return e==null}let L=null;function p(){return(L===null||L.buffer.detached===!0||L.buffer.detached===void 0&&L.buffer!==f.memory.buffer)&&(L=new DataView(f.memory.buffer)),L}function de(e){const n=typeof e;if(n=="number"||n=="boolean"||e==null)return`${e}`;if(n=="string")return`"${e}"`;if(n=="symbol"){const o=e.description;return o==null?"Symbol":`Symbol(${o})`}if(n=="function"){const o=e.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(e)){const o=e.length;let a="[";o>0&&(a+=de(e[0]));for(let u=1;u<o;u++)a+=", "+de(e[u]);return a+="]",a}const t=/\[object ([^\]]+)\]/.exec(toString.call(e));let _;if(t.length>1)_=t[1];else return toString.call(e);if(_=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:_}const Se=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>{f.__wbindgen_export_2.get(e.dtor)(e.a,e.b)});function be(e,n,t,_){const o={a:e,b:n,cnt:1,dtor:t},a=(...u)=>{o.cnt++;const s=o.a;o.a=0;try{return _(s,o.b,...u)}finally{--o.cnt===0?(f.__wbindgen_export_2.get(o.dtor)(s,o.b),Se.unregister(o)):o.a=s}};return a.original=o,Se.register(a,o,o),a}function ve(e,n,t){f._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h187715d88a0ecad1(e,n,c(t))}function Xe(e,n,t){f._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h0960554546eefafc(e,n,c(t))}function Ze(e,n){const t=n(e.length*1,1)>>>0;return q().set(e,t/1),x=e.length,t}let re=null;function Je(){return(re===null||re.byteLength===0)&&(re=new Uint32Array(f.memory.buffer)),re}function ge(e,n){return e=e>>>0,Je().subarray(e/4,e/4+n)}function B(e,n){try{return e.apply(this,n)}catch(t){f.__wbindgen_exn_store(c(t))}}function en(e,n,t,_){f.wasm_bindgen__convert__closures__invoke2_mut__h8b05459977c113ac(e,n,c(t),c(_))}const $e=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>f.__wbg_imagedetector_free(e>>>0,1));class nn{__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,$e.unregister(this),n}free(){const n=this.__destroy_into_raw();f.__wbg_imagedetector_free(n,0)}constructor(n,t,_,o){const a=f.imagedetector_new(n,t,_,o);return this.__wbg_ptr=a>>>0,$e.register(this,this.__wbg_ptr,this),this}increment(){return f.imagedetector_increment(this.__wbg_ptr)>>>0}decrement(){return f.imagedetector_decrement(this.__wbg_ptr)>>>0}detect_image_and_mozaic(n,t,_){const o=Ze(n,f.__wbindgen_malloc),a=x,u=f.imagedetector_detect_image_and_mozaic(this.__wbg_ptr,o,a,t,_);return z(u)}}function tn(e){z(e)}function rn(e,n){const t=P(e,n);return c(t)}function _n(){const e=new Error;return c(e)}function on(e,n){const t=r(n).stack,_=T(t,f.__wbindgen_malloc,f.__wbindgen_realloc),o=x;p().setInt32(e+4*1,o,!0),p().setInt32(e+4*0,_,!0)}function cn(e,n){let t,_;try{t=e,_=n,console.error(P(e,n))}finally{f.__wbindgen_free(t,_,1)}}function an(e){let n;try{n=r(e)instanceof GPUValidationError}catch{n=!1}return n}function un(e,n){const t=r(n).message,_=T(t,f.__wbindgen_malloc,f.__wbindgen_realloc),o=x;p().setInt32(e+4*1,o,!0),p().setInt32(e+4*0,_,!0)}function fn(e){let n;try{n=r(e)instanceof GPUOutOfMemoryError}catch{n=!1}return n}function sn(e){const n=r(e).type;return{error:0,warning:1,info:2}[n]??3}function dn(e){return r(e).offset}function bn(e){return r(e).length}function gn(e){const n=r(e);return c(n)}function ln(e){const n=r(e).error;return c(n)}function mn(e){const n=z(e).original;return n.cnt--==1?(n.a=0,!0):!1}function wn(e){let n;try{n=r(e)instanceof GPUDeviceLostInfo}catch{n=!1}return n}function pn(e){const n=r(e).reason;return{unknown:0,destroyed:1}[n]??2}function hn(e,n){const t=r(n).message,_=T(t,f.__wbindgen_malloc,f.__wbindgen_realloc),o=x;p().setInt32(e+4*1,o,!0),p().setInt32(e+4*0,_,!0)}function yn(e,n){const t=r(n),_=typeof t=="string"?t:void 0;var o=N(_)?0:T(_,f.__wbindgen_malloc,f.__wbindgen_realloc),a=x;p().setInt32(e+4*1,a,!0),p().setInt32(e+4*0,o,!0)}function xn(e,n,t){return r(e).has(P(n,t))}function Bn(e){return r(e).maxTextureDimension1D}function Sn(e){return r(e).maxTextureDimension2D}function vn(e){return r(e).maxTextureDimension3D}function $n(e){return r(e).maxTextureArrayLayers}function kn(e){return r(e).maxBindGroups}function In(e){return r(e).maxBindingsPerBindGroup}function Pn(e){return r(e).maxDynamicUniformBuffersPerPipelineLayout}function Cn(e){return r(e).maxDynamicStorageBuffersPerPipelineLayout}function An(e){return r(e).maxSampledTexturesPerShaderStage}function Tn(e){return r(e).maxSamplersPerShaderStage}function En(e){return r(e).maxStorageBuffersPerShaderStage}function On(e){return r(e).maxStorageTexturesPerShaderStage}function Wn(e){return r(e).maxUniformBuffersPerShaderStage}function Gn(e){return r(e).maxUniformBufferBindingSize}function Dn(e){return r(e).maxStorageBufferBindingSize}function zn(e){return r(e).maxVertexBuffers}function Ln(e){return r(e).maxBufferSize}function Fn(e){return r(e).maxVertexAttributes}function Rn(e){return r(e).maxVertexBufferArrayStride}function Mn(e){return r(e).minUniformBufferOffsetAlignment}function Un(e){return r(e).minStorageBufferOffsetAlignment}function jn(e){return r(e).maxInterStageShaderComponents}function Vn(e){return r(e).maxColorAttachments}function qn(e){return r(e).maxColorAttachmentBytesPerSample}function Nn(e){return r(e).maxComputeWorkgroupStorageSize}function Hn(e){return r(e).maxComputeInvocationsPerWorkgroup}function Qn(e){return r(e).maxComputeWorkgroupSizeX}function Yn(e){return r(e).maxComputeWorkgroupSizeY}function Kn(e){return r(e).maxComputeWorkgroupSizeZ}function Xn(e){return r(e).maxComputeWorkgroupsPerDimension}function Zn(e){let n;try{n=r(e)instanceof GPUAdapter}catch{n=!1}return n}function Jn(e){const n=r(e).queue;return c(n)}function et(e){const n=r(e);return typeof n=="object"&&n!==null}function nt(e){let n;try{n=r(e)instanceof GPUCanvasContext}catch{n=!1}return n}function tt(e,n,t){const _=r(e).getMappedRange(n,t);return c(_)}function rt(e){const n=r(e).Window;return c(n)}function _t(e){return r(e)===void 0}function ot(e){const n=r(e).WorkerGlobalScope;return c(n)}function ct(e){const n=r(e).gpu;return c(n)}function at(e,n){const t=r(e).requestAdapter(r(n));return c(t)}function ut(e){return c(e)}function it(e,n){const t=r(e).requestDevice(r(n));return c(t)}function ft(e){const n=r(e).features;return c(n)}function st(e){const n=r(e).limits;return c(n)}function dt(e){const n=r(e).getPreferredCanvasFormat();return{r8unorm:0,r8snorm:1,r8uint:2,r8sint:3,r16uint:4,r16sint:5,r16float:6,rg8unorm:7,rg8snorm:8,rg8uint:9,rg8sint:10,r32uint:11,r32sint:12,r32float:13,rg16uint:14,rg16sint:15,rg16float:16,rgba8unorm:17,"rgba8unorm-srgb":18,rgba8snorm:19,rgba8uint:20,rgba8sint:21,bgra8unorm:22,"bgra8unorm-srgb":23,rgb9e5ufloat:24,rgb10a2uint:25,rgb10a2unorm:26,rg11b10ufloat:27,rg32uint:28,rg32sint:29,rg32float:30,rgba16uint:31,rgba16sint:32,rgba16float:33,rgba32uint:34,rgba32sint:35,rgba32float:36,stencil8:37,depth16unorm:38,depth24plus:39,"depth24plus-stencil8":40,depth32float:41,"depth32float-stencil8":42,"bc1-rgba-unorm":43,"bc1-rgba-unorm-srgb":44,"bc2-rgba-unorm":45,"bc2-rgba-unorm-srgb":46,"bc3-rgba-unorm":47,"bc3-rgba-unorm-srgb":48,"bc4-r-unorm":49,"bc4-r-snorm":50,"bc5-rg-unorm":51,"bc5-rg-snorm":52,"bc6h-rgb-ufloat":53,"bc6h-rgb-float":54,"bc7-rgba-unorm":55,"bc7-rgba-unorm-srgb":56,"etc2-rgb8unorm":57,"etc2-rgb8unorm-srgb":58,"etc2-rgb8a1unorm":59,"etc2-rgb8a1unorm-srgb":60,"etc2-rgba8unorm":61,"etc2-rgba8unorm-srgb":62,"eac-r11unorm":63,"eac-r11snorm":64,"eac-rg11unorm":65,"eac-rg11snorm":66,"astc-4x4-unorm":67,"astc-4x4-unorm-srgb":68,"astc-5x4-unorm":69,"astc-5x4-unorm-srgb":70,"astc-5x5-unorm":71,"astc-5x5-unorm-srgb":72,"astc-6x5-unorm":73,"astc-6x5-unorm-srgb":74,"astc-6x6-unorm":75,"astc-6x6-unorm-srgb":76,"astc-8x5-unorm":77,"astc-8x5-unorm-srgb":78,"astc-8x6-unorm":79,"astc-8x6-unorm-srgb":80,"astc-8x8-unorm":81,"astc-8x8-unorm-srgb":82,"astc-10x5-unorm":83,"astc-10x5-unorm-srgb":84,"astc-10x6-unorm":85,"astc-10x6-unorm-srgb":86,"astc-10x8-unorm":87,"astc-10x8-unorm-srgb":88,"astc-10x10-unorm":89,"astc-10x10-unorm-srgb":90,"astc-12x10-unorm":91,"astc-12x10-unorm-srgb":92,"astc-12x12-unorm":93,"astc-12x12-unorm-srgb":94}[n]??95}function bt(e,n){r(e).configure(r(n))}function gt(e){const n=r(e).getCurrentTexture();return c(n)}function lt(e){const n=r(e).features;return c(n)}function mt(e){const n=r(e).limits;return c(n)}function wt(e,n){const t=r(e).createShaderModule(r(n));return c(t)}function pt(e,n){const t=r(e).createBindGroupLayout(r(n));return c(t)}function ht(e,n){const t=r(e).createBindGroup(r(n));return c(t)}function yt(e,n){const t=r(e).createPipelineLayout(r(n));return c(t)}function xt(e,n){const t=r(e).createRenderPipeline(r(n));return c(t)}function Bt(e,n){const t=r(e).createComputePipeline(r(n));return c(t)}function St(e,n){const t=r(e).createBuffer(r(n));return c(t)}function vt(e,n){const t=r(e).createTexture(r(n));return c(t)}function $t(e,n){const t=r(e).createSampler(r(n));return c(t)}function kt(e,n){const t=r(e).createQuerySet(r(n));return c(t)}function It(e,n){const t=r(e).createCommandEncoder(r(n));return c(t)}function Pt(e,n){const t=r(e).createRenderBundleEncoder(r(n));return c(t)}function Ct(e){r(e).destroy()}function At(e){const n=r(e).lost;return c(n)}function Tt(e,n){r(e).onuncapturederror=r(n)}function Et(e,n){r(e).pushErrorScope(["validation","out-of-memory","internal"][n])}function Ot(e){const n=r(e).popErrorScope();return c(n)}function Wt(e,n,t,_){const o=r(e).mapAsync(n>>>0,t,_);return c(o)}function Gt(e){r(e).unmap()}function Dt(e){const n=r(e).getCompilationInfo();return c(n)}function zt(e){const n=r(e).messages;return c(n)}function Lt(e,n){const t=r(e).createView(r(n));return c(t)}function Ft(e){r(e).destroy()}function Rt(e){r(e).destroy()}function Mt(e,n){const t=r(e).getBindGroupLayout(n>>>0);return c(t)}function Ut(e,n){const t=r(e).getBindGroupLayout(n>>>0);return c(t)}function jt(e,n,t,_,o,a){r(e).copyBufferToBuffer(r(n),t,r(_),o,a)}function Vt(e,n,t,_){r(e).copyBufferToTexture(r(n),r(t),r(_))}function qt(e,n,t,_){r(e).copyTextureToBuffer(r(n),r(t),r(_))}function Nt(e,n,t,_){r(e).copyTextureToTexture(r(n),r(t),r(_))}function Ht(e,n){const t=r(e).beginComputePass(r(n));return c(t)}function Qt(e,n){const t=r(e).beginRenderPass(r(n));return c(t)}function Yt(e,n){const t=r(n).label,_=T(t,f.__wbindgen_malloc,f.__wbindgen_realloc),o=x;p().setInt32(e+4*1,o,!0),p().setInt32(e+4*0,_,!0)}function Kt(e,n){const t=r(e).finish(r(n));return c(t)}function Xt(e){const n=r(e).finish();return c(n)}function Zt(e,n,t){r(e).clearBuffer(r(n),t)}function Jt(e,n,t,_){r(e).clearBuffer(r(n),t,_)}function er(e,n,t,_,o,a){r(e).resolveQuerySet(r(n),t>>>0,_>>>0,r(o),a>>>0)}function nr(e){const n=r(e).finish();return c(n)}function tr(e,n){const t=r(e).finish(r(n));return c(t)}function rr(e,n,t,_,o,a){r(e).writeBuffer(r(n),t,r(_),o,a)}function _r(e){return r(e).usage}function or(e){return r(e).size}function cr(e,n,t,_,o){r(e).writeTexture(r(n),r(t),r(_),r(o))}function ar(e,n,t,_){r(e).copyExternalImageToTexture(r(n),r(t),r(_))}function ur(e,n){r(e).setPipeline(r(n))}function ir(e,n,t){r(e).setBindGroup(n>>>0,r(t))}function fr(e,n,t,_,o,a,u){r(e).setBindGroup(n>>>0,r(t),ge(_,o),a,u>>>0)}function sr(e,n,t,_){r(e).dispatchWorkgroups(n>>>0,t>>>0,_>>>0)}function dr(e,n,t){r(e).dispatchWorkgroupsIndirect(r(n),t)}function br(e){r(e).end()}function gr(e,n){r(e).setPipeline(r(n))}function lr(e,n,t){r(e).setBindGroup(n>>>0,r(t))}function mr(e,n,t,_,o,a,u){r(e).setBindGroup(n>>>0,r(t),ge(_,o),a,u>>>0)}function wr(e,n,t,_){r(e).setIndexBuffer(r(n),["uint16","uint32"][t],_)}function pr(e,n,t,_,o){r(e).setIndexBuffer(r(n),["uint16","uint32"][t],_,o)}function hr(e,n,t,_){r(e).setVertexBuffer(n>>>0,r(t),_)}function yr(e,n,t,_,o){r(e).setVertexBuffer(n>>>0,r(t),_,o)}function xr(e,n,t,_,o){r(e).draw(n>>>0,t>>>0,_>>>0,o>>>0)}function Br(e,n,t,_,o,a){r(e).drawIndexed(n>>>0,t>>>0,_>>>0,o,a>>>0)}function Sr(e,n,t){r(e).drawIndirect(r(n),t)}function vr(e,n,t){r(e).drawIndexedIndirect(r(n),t)}function $r(e,n){r(e).setPipeline(r(n))}function kr(e,n,t){r(e).setBindGroup(n>>>0,r(t))}function Ir(e,n,t,_,o,a,u){r(e).setBindGroup(n>>>0,r(t),ge(_,o),a,u>>>0)}function Pr(e,n,t,_){r(e).setIndexBuffer(r(n),["uint16","uint32"][t],_)}function Cr(e,n,t,_,o){r(e).setIndexBuffer(r(n),["uint16","uint32"][t],_,o)}function Ar(e,n,t,_){r(e).setVertexBuffer(n>>>0,r(t),_)}function Tr(e,n,t,_,o){r(e).setVertexBuffer(n>>>0,r(t),_,o)}function Er(e,n,t,_,o){r(e).draw(n>>>0,t>>>0,_>>>0,o>>>0)}function Or(e,n,t,_,o,a){r(e).drawIndexed(n>>>0,t>>>0,_>>>0,o,a>>>0)}function Wr(e,n,t){r(e).drawIndirect(r(n),t)}function Gr(e,n,t){r(e).drawIndexedIndirect(r(n),t)}function Dr(e,n){r(e).setBlendConstant(r(n))}function zr(e,n,t,_,o){r(e).setScissorRect(n>>>0,t>>>0,_>>>0,o>>>0)}function Lr(e,n,t,_,o,a,u){r(e).setViewport(n,t,_,o,a,u)}function Fr(e,n){r(e).setStencilReference(n>>>0)}function Rr(e,n){r(e).executeBundles(r(n))}function Mr(e){r(e).end()}function Ur(e,n){r(e).submit(r(n))}function jr(e){return r(e).lineNum}function Vr(e,n){const t=r(n).message,_=T(t,f.__wbindgen_malloc,f.__wbindgen_realloc),o=x;p().setInt32(e+4*1,o,!0),p().setInt32(e+4*0,_,!0)}function qr(e){const n=r(e).queueMicrotask;return c(n)}function Nr(e){return typeof r(e)=="function"}function Hr(e){queueMicrotask(r(e))}function Qr(e){let n;try{n=r(e)instanceof Window}catch{n=!1}return n}function Yr(e){const n=r(e).document;return N(n)?0:c(n)}function Kr(e){const n=r(e).navigator;return c(n)}function Xr(){return B(function(e,n,t){const _=r(e).querySelectorAll(P(n,t));return c(_)},arguments)}function Zr(e){const n=r(e).navigator;return c(n)}function Jr(e,n){const t=r(e)[n>>>0];return N(t)?0:c(t)}function e_(e,n){r(e).width=n>>>0}function n_(e,n){r(e).height=n>>>0}function t_(){return B(function(e,n,t){const _=r(e).getContext(P(n,t));return N(_)?0:c(_)},arguments)}function r_(e){console.log(r(e))}function __(e,n){r(e).width=n>>>0}function o_(e,n){r(e).height=n>>>0}function c_(){return B(function(e,n,t){const _=r(e).getContext(P(n,t));return N(_)?0:c(_)},arguments)}function a_(e,n,t){r(e)[z(n)]=z(t)}function u_(e,n){const t=r(e)[n>>>0];return c(t)}function i_(e){return r(e).length}function f_(){const e=new Array;return c(e)}function s_(e,n){const t=new Function(P(e,n));return c(t)}function d_(){return B(function(e,n){const t=r(e).call(r(n));return c(t)},arguments)}function b_(){const e=new Object;return c(e)}function g_(){return B(function(){const e=self.self;return c(e)},arguments)}function l_(){return B(function(){const e=window.window;return c(e)},arguments)}function m_(){return B(function(){const e=globalThis.globalThis;return c(e)},arguments)}function w_(){return B(function(){const e=global.global;return c(e)},arguments)}function p_(e,n,t){r(e)[n>>>0]=z(t)}function h_(e,n){return r(e).push(r(n))}function y_(){return B(function(e,n,t){const _=r(e).call(r(n),r(t));return c(_)},arguments)}function x_(e){let n;try{n=r(e)instanceof Object}catch{n=!1}return n}function B_(e){const n=r(e).valueOf();return c(n)}function S_(e,n){try{var t={a:e,b:n},_=(a,u)=>{const s=t.a;t.a=0;try{return en(s,t.b,a,u)}finally{t.a=s}};const o=new Promise(_);return c(o)}finally{t.a=t.b=0}}function v_(e){const n=Promise.resolve(r(e));return c(n)}function $_(e,n){const t=r(e).then(r(n));return c(t)}function k_(e,n,t){const _=r(e).then(r(n),r(t));return c(_)}function I_(e){const n=r(e).buffer;return c(n)}function P_(e,n,t){const _=new Uint8Array(r(e),n>>>0,t>>>0);return c(_)}function C_(e){const n=new Uint8Array(r(e));return c(n)}function A_(e,n,t){r(e).set(r(n),t>>>0)}function T_(e){return r(e).length}function E_(e){const n=r(e).buffer;return c(n)}function O_(){return B(function(e,n,t){return Reflect.set(r(e),r(n),r(t))},arguments)}function W_(e,n){const t=de(r(n)),_=T(t,f.__wbindgen_malloc,f.__wbindgen_realloc),o=x;p().setInt32(e+4*1,o,!0),p().setInt32(e+4*0,_,!0)}function G_(e,n){throw new Error(P(e,n))}function D_(){const e=f.memory;return c(e)}function z_(e,n,t){const _=be(e,n,571,ve);return c(_)}function L_(e,n,t){const _=be(e,n,571,ve);return c(_)}function F_(e,n,t){const _=be(e,n,578,Xe);return c(_)}URL=globalThis.URL;const h=await qe({"./image_detect_mozaic_wasm_bg.js":{__wbindgen_object_drop_ref:tn,__wbindgen_string_new:rn,__wbg_new_abda76e883ba8a5f:_n,__wbg_stack_658279fe44541cf6:on,__wbg_error_f851667af71bcfc6:cn,__wbg_instanceof_GpuValidationError_05482398d349fd2d:an,__wbg_message_4bd9ef09b3092122:un,__wbg_instanceof_GpuOutOfMemoryError_658135cd3b3f08e2:fn,__wbg_type_c3e79de7c41f03c2:sn,__wbg_offset_47f9a19926637c8e:dn,__wbg_length_ff62902e8840f82f:bn,__wbindgen_object_clone_ref:gn,__wbg_error_520ca6f621497012:ln,__wbindgen_cb_drop:mn,__wbg_instanceof_GpuDeviceLostInfo_c7232ceb822b15d6:wn,__wbg_reason_436ee862de561851:pn,__wbg_message_54cb97c0fd1579bf:hn,__wbindgen_string_get:yn,__wbg_has_14b751afdcf0a341:xn,__wbg_maxTextureDimension1D_71c238385d79f287:Bn,__wbg_maxTextureDimension2D_ce910a0ea6c7213b:Sn,__wbg_maxTextureDimension3D_76032d2a97af63ac:vn,__wbg_maxTextureArrayLayers_b561668f7e1ebacc:$n,__wbg_maxBindGroups_d2b688642140a1bb:kn,__wbg_maxBindingsPerBindGroup_a3e9e404dd893c83:In,__wbg_maxDynamicUniformBuffersPerPipelineLayout_98a8fbca367148bf:Pn,__wbg_maxDynamicStorageBuffersPerPipelineLayout_0dec6aea74b472ad:Cn,__wbg_maxSampledTexturesPerShaderStage_7a0712465c0a12b4:An,__wbg_maxSamplersPerShaderStage_6716e9792fc2a833:Tn,__wbg_maxStorageBuffersPerShaderStage_640d34738978a4ff:En,__wbg_maxStorageTexturesPerShaderStage_6614a1e40f7e2827:On,__wbg_maxUniformBuffersPerShaderStage_1ff2f3c6468374ae:Wn,__wbg_maxUniformBufferBindingSize_8830a8df4f730637:Gn,__wbg_maxStorageBufferBindingSize_10b6eb49372335bc:Dn,__wbg_maxVertexBuffers_9f97f2a89863a431:zn,__wbg_maxBufferSize_1c8b836056558ebf:Ln,__wbg_maxVertexAttributes_cff466bbace9aa7c:Fn,__wbg_maxVertexBufferArrayStride_fb650714a5bd0e68:Rn,__wbg_minUniformBufferOffsetAlignment_0168a0d08b19afbe:Mn,__wbg_minStorageBufferOffsetAlignment_3b63a59f37f275f8:Un,__wbg_maxInterStageShaderComponents_db659eaa3b248a74:jn,__wbg_maxColorAttachments_e821b856b5cba24e:Vn,__wbg_maxColorAttachmentBytesPerSample_ab770042dd82a5bf:qn,__wbg_maxComputeWorkgroupStorageSize_e6773eb1cbfa7a83:Nn,__wbg_maxComputeInvocationsPerWorkgroup_4ed447998b195973:Hn,__wbg_maxComputeWorkgroupSizeX_de94f4925b26c73c:Qn,__wbg_maxComputeWorkgroupSizeY_cb75de6b450c8915:Yn,__wbg_maxComputeWorkgroupSizeZ_6277d18773d70891:Kn,__wbg_maxComputeWorkgroupsPerDimension_baef21641827881d:Xn,__wbg_instanceof_GpuAdapter_ba82c448cfa55608:Zn,__wbg_queue_e124eaca54d285d4:Jn,__wbindgen_is_object:et,__wbg_instanceof_GpuCanvasContext_1eacd2a8c6b36ada:nt,__wbg_getMappedRange_08e71df297c66a50:tt,__wbg_Window_4d1f8d969d639a22:rt,__wbindgen_is_undefined:_t,__wbg_WorkerGlobalScope_c4f12290f7d2efed:ot,__wbg_gpu_7d756a02ad45027d:ct,__wbg_requestAdapter_8413757c51a35b1d:at,__wbindgen_number_new:ut,__wbg_requestDevice_1c8e4f0fe8729328:it,__wbg_features_e7f12cb6c5258238:ft,__wbg_limits_622a6ae19a037dbf:st,__wbg_getPreferredCanvasFormat_d55bc32b5a6b948a:dt,__wbg_configure_48cfbf148a9998c2:bt,__wbg_getCurrentTexture_1c8e29bec577927d:gt,__wbg_features_b1971639ec1a77f7:lt,__wbg_limits_e806d307d42a9dde:mt,__wbg_createShaderModule_cda89eb5c1073627:wt,__wbg_createBindGroupLayout_4243a95be946d48a:pt,__wbg_createBindGroup_f93afa3a0a06b10e:ht,__wbg_createPipelineLayout_bcb406883550f9cc:yt,__wbg_createRenderPipeline_7ca396c186d8d06a:xt,__wbg_createComputePipeline_fb60500f9a96e290:Bt,__wbg_createBuffer_44406243485760b1:St,__wbg_createTexture_06106f81b60e5462:vt,__wbg_createSampler_ed81ff565caa903a:$t,__wbg_createQuerySet_4040f9ea5a2ac03c:kt,__wbg_createCommandEncoder_c7eddb5143f91992:It,__wbg_createRenderBundleEncoder_d9644450ab4cad8f:Pt,__wbg_destroy_2a8c41712abac4cb:Ct,__wbg_lost_02e8ddfb37103cc2:At,__wbg_setonuncapturederror_c702acc9eeeb9613:Tt,__wbg_pushErrorScope_3dc565fa86fee870:Et,__wbg_popErrorScope_6d6b4abc95412374:Ot,__wbg_mapAsync_98ce4986e2f6d4af:Wt,__wbg_unmap_efca7885e5daff78:Gt,__wbg_getCompilationInfo_adcb4d74ed54d1f9:Dt,__wbg_messages_6833dfd0ae6a0a7c:zt,__wbg_createView_87e589e1574ba76c:Lt,__wbg_destroy_387cb19081689594:Ft,__wbg_destroy_b040948312c539a9:Rt,__wbg_getBindGroupLayout_0194b7a790ac805d:Mt,__wbg_getBindGroupLayout_1490d5a61f4fd56b:Ut,__wbg_copyBufferToBuffer_f0736fef84f76be5:jt,__wbg_copyBufferToTexture_aedde01ad3786b4f:Vt,__wbg_copyTextureToBuffer_268207d3e09dfa81:qt,__wbg_copyTextureToTexture_7ea3d6de0a82ce7f:Nt,__wbg_beginComputePass_df50d9ddd5f32a63:Ht,__wbg_beginRenderPass_14284a54cee2063b:Qt,__wbg_label_81cb6c4ebcba5f4d:Yt,__wbg_finish_78696a2f194fbb7a:Kt,__wbg_finish_7ad9d3e23124bbc6:Xt,__wbg_clearBuffer_a5ccb106665ad51e:Zt,__wbg_clearBuffer_f06a69a0aa134d24:Jt,__wbg_resolveQuerySet_7354946ea63dacbb:er,__wbg_finish_5be91110098e071c:nr,__wbg_finish_667443ed0047f53a:tr,__wbg_writeBuffer_6ce87bc6ff22a2b5:rr,__wbg_usage_5043ac06189fbe53:_r,__wbg_size_61d4fa05868b79cd:or,__wbg_writeTexture_3708ced0dd386721:cr,__wbg_copyExternalImageToTexture_e192d56d70996ad4:ar,__wbg_setPipeline_4d0e04e7370f0e2e:ur,__wbg_setBindGroup_48300d51a3d74853:ir,__wbg_setBindGroup_d79f4f1d5e43c06f:fr,__wbg_dispatchWorkgroups_f0fd90dcd4a506fa:sr,__wbg_dispatchWorkgroupsIndirect_567a84763f6a0b87:dr,__wbg_end_bbe499813ce72830:br,__wbg_setPipeline_6174c2e8900fe24a:gr,__wbg_setBindGroup_de4812744c6ebb6c:lr,__wbg_setBindGroup_92581920e209bf52:mr,__wbg_setIndexBuffer_91b6f5eb1a43df9b:wr,__wbg_setIndexBuffer_5bce79843be8653d:pr,__wbg_setVertexBuffer_d9b48c3489dcfa22:hr,__wbg_setVertexBuffer_330ab505b9dfc64b:yr,__wbg_draw_29abcb466fee48b4:xr,__wbg_drawIndexed_34b06707991ddaf7:Br,__wbg_drawIndirect_0054fe754e8e46e9:Sr,__wbg_drawIndexedIndirect_4b7b51fa979657ca:vr,__wbg_setPipeline_8f2f5c316ddb7f68:$r,__wbg_setBindGroup_da48569994113ec3:kr,__wbg_setBindGroup_1c3dd07b998fa943:Ir,__wbg_setIndexBuffer_1dc175abfd5d9be9:Pr,__wbg_setIndexBuffer_a0fcb26f210351b7:Cr,__wbg_setVertexBuffer_c347f9618d3f056a:Ar,__wbg_setVertexBuffer_40da6368898587db:Tr,__wbg_draw_a3e2be7a25d4af68:Er,__wbg_drawIndexed_f219cccc74b869c5:Or,__wbg_drawIndirect_23fc0a72c5f1b993:Wr,__wbg_drawIndexedIndirect_6839c0505e2eed2e:Gr,__wbg_setBlendConstant_fd172910ef2cc0c8:Dr,__wbg_setScissorRect_915b4534e3936f28:zr,__wbg_setViewport_aff318ede051c64e:Lr,__wbg_setStencilReference_e2bb05496423e92e:Fr,__wbg_executeBundles_0f6b9b3accb5b6a7:Rr,__wbg_end_c97b7dbccda72e72:Mr,__wbg_submit_4283b63806c5d15e:Ur,__wbg_lineNum_06a4c70c1027df81:jr,__wbg_message_0ff806941d54e1d2:Vr,__wbg_queueMicrotask_48421b3cc9052b68:qr,__wbindgen_is_function:Nr,__wbg_queueMicrotask_12a30234db4045d3:Hr,__wbg_instanceof_Window_5012736c80a01584:Qr,__wbg_document_8554450897a855b9:Yr,__wbg_navigator_6210380287bf8581:Kr,__wbg_querySelectorAll_52447cbab6df8bae:Xr,__wbg_navigator_db73b5b11a0c5c93:Zr,__wbg_get_fe289e3950b3978a:Jr,__wbg_setwidth_c20f1f8fcd5d93b4:e_,__wbg_setheight_a5e39c9d97429299:n_,__wbg_getContext_bd2ece8a59fd4732:t_,__wbg_log_b103404cc5920657:r_,__wbg_setwidth_e371a8d6b16ebe84:__,__wbg_setheight_ba99ad2df4295e89:o_,__wbg_getContext_69ec873410cbba3c:c_,__wbg_set_f975102236d3c502:a_,__wbg_get_3baa728f9d58d3f6:u_,__wbg_length_ae22078168b726f5:i_,__wbg_new_a220cf903aa02ca2:f_,__wbg_newnoargs_76313bd6ff35d0f2:s_,__wbg_call_1084a111329e68ce:d_,__wbg_new_525245e2b9901204:b_,__wbg_self_3093d5d1f7bcb682:g_,__wbg_window_3bcfc4d31bc012f8:l_,__wbg_globalThis_86b222e13bdf32ed:m_,__wbg_global_e5a3fe56f8be9485:w_,__wbg_set_673dda6c73d19609:p_,__wbg_push_37c89022f34c01ca:h_,__wbg_call_89af060b4e1523f2:y_,__wbg_instanceof_Object_b80213ae6cc9aafb:x_,__wbg_valueOf_d5ba0a54a2aa5615:B_,__wbg_new_b85e72ed1bfd57f9:S_,__wbg_resolve_570458cb99d56a43:v_,__wbg_then_95e6edc0f89b73b1:$_,__wbg_then_876bb3c633745cc6:k_,__wbg_buffer_b7b08af79b0b0974:I_,__wbg_newwithbyteoffsetandlength_8a2cb9ca96b27ec9:P_,__wbg_new_ea1883e1e5e86686:C_,__wbg_set_d1e79e2388520f18:A_,__wbg_length_8339fcf5d8ecd12e:T_,__wbg_buffer_0710d1b9dbe2eea6:E_,__wbg_set_eacc7d73fefaafdf:O_,__wbindgen_debug_string:W_,__wbindgen_throw:G_,__wbindgen_memory:D_,__wbindgen_closure_wrapper1326:z_,__wbindgen_closure_wrapper1328:L_,__wbindgen_closure_wrapper1803:F_}},Ve),R_=h.memory,M_=h.__wbg_imagedetector_free,U_=h.imagedetector_new,j_=h.imagedetector_increment,V_=h.imagedetector_decrement,q_=h.imagedetector_detect_image_and_mozaic,N_=h.__wbindgen_malloc,H_=h.__wbindgen_realloc,Q_=h.__wbindgen_export_2,Y_=h._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h187715d88a0ecad1,K_=h._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h0960554546eefafc,X_=h.__wbindgen_free,Z_=h.__wbindgen_exn_store,J_=h.wasm_bindgen__convert__closures__invoke2_mut__h8b05459977c113ac,eo=Object.freeze(Object.defineProperty({__proto__:null,__wbg_imagedetector_free:M_,__wbindgen_exn_store:Z_,__wbindgen_export_2:Q_,__wbindgen_free:X_,__wbindgen_malloc:N_,__wbindgen_realloc:H_,_dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h0960554546eefafc:K_,_dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h187715d88a0ecad1:Y_,imagedetector_decrement:V_,imagedetector_detect_image_and_mozaic:q_,imagedetector_increment:j_,imagedetector_new:U_,memory:R_,wasm_bindgen__convert__closures__invoke2_mut__h8b05459977c113ac:J_},Symbol.toStringTag,{value:"Module"}));Ne(eo);const ke=(e,n)=>{const t=e.toDataURL("image/png"),_=document.createElement("a");_.href=t,_.download=n,_.click()},no=(e,n)=>{var _;if(!e||!n)return;const t=document.createElement("canvas");t.width=n.videoWidth,t.height=n.videoHeight,(_=t.getContext("2d"))==null||_.drawImage(n,0,0,n.videoWidth,n.videoHeight),ke(t,"original_image.png")},to=(e,n)=>{var _;if(!e||!n)return;const t=document.createElement("canvas");t.width=n.width,t.height=n.height,(_=t.getContext("2d"))==null||_.drawImage(n,0,0),ke(t,"edge_detected_image.png")},ro=()=>{const e=navigator.userAgent;return/iPhone/i.test(e)?"iPhone":/android/i.test(e)?"Android":"Other"};function _o(e){let n;return{c(){n=M("div"),n.innerHTML="<h3>Help</h3> <p>Full screen by `Escape` key</p> <p>Full screen for effect window by `w` key</p> <p>Save effect image by `s` key</p> <p>Save web camera image by `o` key</p> <p>Show Help window by `h` key</p>",k(n,"class","help-overlay svelte-j8kng8")},m(t,_){$(t,n,_)},p:m,i:m,o:m,d(t){t&&S(n)}}}class oo extends ee{constructor(n){super(),J(this,n,null,_o,H,{})}}function Ie(e){let n,t;return n=new oo({}),{c(){se(n.$$.fragment)},m(_,o){X(n,_,o),t=!0},i(_){t||(I(n.$$.fragment,_),t=!0)},o(_){D(n.$$.fragment,_),t=!1},d(_){Z(n,_)}}}function co(e){let n,t,_,o,a,u,s,d,i=e[1]&&Ie();return{c(){n=M("video"),t=he(),_=M("div"),o=Y(e[2]),a=Y(" FPS"),u=he(),i&&i.c(),s=Te(),k(n,"id","video-off"),n.autoplay=!0,n.playsInline=!0,k(n,"aria-live","polite"),k(n,"aria-label","Live webcam feed"),k(_,"id","fps"),E(_,"position","absolute"),E(_,"bottom","10px"),E(_,"left","10px"),E(_,"color","white"),E(_,"background-color","rgba(0, 0, 0, 0.7)"),E(_,"padding","5px")},m(g,b){$(g,n,b),e[3](n),$(g,t,b),$(g,_,b),pe(_,o),pe(_,a),$(g,u,b),i&&i.m(g,b),$(g,s,b),d=!0},p(g,[b]){(!d||b&4)&&Oe(o,g[2]),g[1]?i?b&2&&I(i,1):(i=Ie(),i.c(),I(i,1),i.m(s.parentNode,s)):i&&(Re(),D(i,1,1,()=>{i=null}),Me())},i(g){d||(I(i),d=!0)},o(g){D(i),d=!1},d(g){g&&(S(n),S(t),S(_),S(u),S(s)),e[3](null),i&&i.d(g)}}}const ao=50,uo=4500,io=!0;function fo(e,n,t){let _,o,a,u,s,d=!1,i=!1,g=0,b=0;const _e=Math.random()<.5?1:2,oe=new nn(_e,ao,uo,io),ce=async()=>{try{const l=await navigator.mediaDevices.getUserMedia({video:!0});t(0,_.srcObject=l,_),await _.play(),d=!0}catch(l){console.error("Failed to setup video stream:",l)}},xo=()=>{o=document.createElement("canvas"),o.width=_.videoWidth,o.height=_.videoHeight,a=o.getContext("2d")},Bo=()=>{u=document.createElement("canvas"),document.getElementById("app").appendChild(u),u.width=_.videoWidth,u.height=_.videoHeight,u.style.display="block",u.style.width="100%",u.style.height="100%",u.style.objectFit="contain",u.style.objectPosition="center",s=u.getContext("2d")},So=(l,F)=>{document.addEventListener("keydown",y=>{y.key==="Escape"?vo():y.key==="s"||y.key==="S"?(console.log("S: saveOutputImage"),to(l,F)):y.key==="o"||y.key==="O"?(console.log("O: saveOriginalImage"),no(l,_)):y.key==="h"||y.key==="H"?t(1,i=!i):(y.key==="w"||y.key==="W")&&$o(F)})},Pe=async l=>{try{if(!d||!a)return;if(b){const Co=(l-b)/1e3;t(2,g=Math.round(1/Co))}b=l,a.drawImage(_,0,0,o.width,o.height);const F=a.getImageData(0,0,o.width,o.height);console.log("call imageDetector.detect_image_and_mozaic()");const y=await oe.detect_image_and_mozaic(new Uint8Array(F.data.buffer),o.width,o.height);if(y instanceof Error)throw y;const Io=y.raw_data,Po=new ImageData(new Uint8ClampedArray(Io),u.width,u.height);s.putImageData(Po,0,0),requestAnimationFrame(Pe)}catch(F){console.error("Error processing frame:",F)}},vo=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},$o=l=>{l.requestFullscreen&&l.requestFullscreen()};Ge(async()=>{try{await ce(),xo(),Bo(),So(a,o);const l=Math.floor(new Date().getTime()/1e3);Pe(l),ro()==="Others"&&t(1,i=!0)}catch(l){console.error("Error during onMount:",l)}});function ko(l){ae[l?"unshift":"push"](()=>{_=l,t(0,_)})}return[_,i,g,ko]}class so extends ee{constructor(n){super(),J(this,n,fo,co,H,{})}}function bo(e){let n,t;return{c(){n=M("img"),Ce(n.src,t=go)||k(n,"src",t),k(n,"alt","webgpu with webkit"),k(n,"class","svelte-1ve9xnx")},m(_,o){$(_,n,o)},p:m,i:m,o:m,d(_){_&&S(n)}}}const go="./webgpu-featureflag.png";function lo(e){return alert("WebGPU in WebKit Feature Flags must be enabled to use this application"),[]}class mo extends ee{constructor(n){super(),J(this,n,lo,bo,H,{})}}function wo(e){let n,t;return n=new mo({}),{c(){se(n.$$.fragment)},m(_,o){X(n,_,o),t=!0},i(_){t||(I(n.$$.fragment,_),t=!0)},o(_){D(n.$$.fragment,_),t=!1},d(_){Z(n,_)}}}function po(e){let n,t;return n=new so({}),{c(){se(n.$$.fragment)},m(_,o){X(n,_,o),t=!0},i(_){t||(I(n.$$.fragment,_),t=!0)},o(_){D(n.$$.fragment,_),t=!1},d(_){Z(n,_)}}}function ho(e){let n,t,_,o;const a=[po,wo],u=[];function s(d,i){return navigator.gpu?0:1}return t=s(),_=u[t]=a[t](e),{c(){n=M("main"),_.c()},m(d,i){$(d,n,i),u[t].m(n,null),o=!0},p:m,i(d){o||(I(_),o=!0)},o(d){D(_),o=!1},d(d){d&&S(n),u[t].d()}}}class yo extends ee{constructor(n){super(),J(this,n,null,ho,H,{})}}new yo({target:document.getElementById("app")})})()});export default Oo();
